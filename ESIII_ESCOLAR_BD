--
-- PostgreSQL database dump
--

-- Dumped from database version 13.2
-- Dumped by pg_dump version 13.2

-- Started on 2021-05-10 20:20:11

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 203 (class 1259 OID 25073)
-- Name: alunos; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.alunos (
    alu_semestre numeric(2,0) NOT NULL,
    alu_pes_id SERIAL NOT NULL,
    alu_cur_id SERIAL NOT NULL
);


ALTER TABLE public.alunos OWNER TO postgres;

--
-- TOC entry 206 (class 1259 OID 33165)
-- Name: cursos; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.cursos (
    cur_id SERIAL PRIMARY KEY,
    cur_nome character varying(30) NOT NULL,
    cur_descricao character varying(255) NOT NULL,
    cur_nivel character varying(30) NOT NULL,
    cur_duracao numeric(2,0) NOT NULL,
    cur_dtcadastro date NOT NULL,
    cur_mensalidade numeric(6,2) NOT NULL
);


ALTER TABLE public.cursos OWNER TO postgres;

--
-- TOC entry 204 (class 1259 OID 33142)
-- Name: dependentes; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.dependentes (
    dep_materia_id integer NOT NULL,
    dep_dependencia_id integer NOT NULL
);


ALTER TABLE public.dependentes OWNER TO postgres;

--
-- TOC entry 201 (class 1259 OID 25055)
-- Name: enderecos; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.enderecos (
    end_id SERIAL PRIMARY KEY,
    end_cep character varying(8) NOT NULL,
    end_estado character varying(50) NOT NULL,
    end_cidade character varying(50) NOT NULL,
    end_numero numeric(6,0) NOT NULL,
    end_logradouro character varying(255) NOT NULL,
    end_complemento character varying(255),
    end_dtcadastro timestamp with time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.enderecos OWNER TO postgres;

--
-- TOC entry 207 (class 1259 OID 33172)
-- Name: grade_curso; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.grade_curso (
    gra_id SERIAL PRIMARY KEY,
    gra_obrigatorio boolean NOT NULL,
    gra_turno numeric(1,0) NOT NULL,
    gra_dia_semana numeric(1,0) NOT NULL,
    gra_periodo numeric(1,0) NOT NULL,
    gra_dtcadastro timestamp with time zone DEFAULT now() NOT NULL,
    gra_cur_id integer NOT NULL,
    gra_mat_id integer NOT NULL,
    gra_pro_id integer NOT NULL
);


ALTER TABLE public.grade_curso OWNER TO postgres;

--
-- TOC entry 208 (class 1259 OID 33202)
-- Name: historico_aluno; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.historico_aluno (
    his_status character varying(15) NOT NULL,
    his_semestre numeric(2,0) NOT NULL,
    his_notafinal numeric(2,2) NOT NULL,
    his_dtcadastro timestamp with time zone DEFAULT now() NOT NULL,
    his_alu_id integer NOT NULL,
    his_gra_id integer NOT NULL
);


ALTER TABLE public.historico_aluno OWNER TO postgres;

--
-- TOC entry 205 (class 1259 OID 33145)
-- Name: materias; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.materias (
    mat_id SERIAL PRIMARY KEY,
    mat_nome character varying(255) NOT NULL,
    mat_descricao character varying(255) NOT NULL,
    mat_carga_horaria numeric(6,0) NOT NULL,
    mat_dtcadastro timestamp with time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.materias OWNER TO postgres;

--
-- TOC entry 200 (class 1259 OID 25044)
-- Name: pessoas; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.pessoas (
    pes_id SERIAL PRIMARY KEY,
    pes_cpf character varying(11) NOT NULL,
    pes_rg character varying(9) NOT NULL,
    pes_pnome character varying(15) NOT NULL,
    pes_unome character varying(50) NOT NULL,
    pes_email character varying(255) NOT NULL,
    pes_dtnascimento date,
    pes_dtcadastro timestamp with time zone DEFAULT now(),
    pes_end_id integer NOT NULL
);


ALTER TABLE public.pessoas OWNER TO postgres;

--
-- TOC entry 202 (class 1259 OID 25063)
-- Name: professores; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.professores (
    pro_salario numeric(6,2) NOT NULL,
    pro_pes_id integer NOT NULL
);


ALTER TABLE public.professores OWNER TO postgres;

--
-- TOC entry 2901 (class 2606 OID 25077)
-- Name: alunos PK_ALU; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.alunos
    ADD CONSTRAINT "PK_ALU" PRIMARY KEY (alu_pes_id);

--
-- TOC entry 2899 (class 2606 OID 25067)
-- Name: professores PRO_PES; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.professores
    ADD CONSTRAINT "PRO_PES" PRIMARY KEY (pro_pes_id);


--
-- TOC entry 2907 (class 2606 OID 33171)
-- Name: cursos UK_CUR_NOME; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.cursos
    ADD CONSTRAINT "UK_CUR_NOME" UNIQUE (cur_nome);


--
-- TOC entry 2893 (class 2606 OID 25052)
-- Name: pessoas UK_PES_CPF; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.pessoas
    ADD CONSTRAINT "UK_PES_CPF" UNIQUE (pes_cpf);


--
-- TOC entry 2895 (class 2606 OID 25054)
-- Name: pessoas UK_PES_RG; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.pessoas
    ADD CONSTRAINT "UK_PES_RG" UNIQUE (pes_rg);


--
-- TOC entry 2911 (class 2606 OID 33215)
-- Name: alunos FK_ALU_CUR_ID; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.alunos
    ADD CONSTRAINT "FK_ALU_CUR_ID" FOREIGN KEY (alu_cur_id) REFERENCES public.cursos(cur_id) ON UPDATE CASCADE ON DELETE CASCADE NOT VALID;


--
-- TOC entry 2912 (class 2606 OID 33220)
-- Name: alunos FK_ALU_PES_ID; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.alunos
    ADD CONSTRAINT "FK_ALU_PES_ID" FOREIGN KEY (alu_pes_id) REFERENCES public.pessoas(pes_id) ON UPDATE CASCADE ON DELETE CASCADE NOT VALID;


--
-- TOC entry 2914 (class 2606 OID 33230)
-- Name: dependentes FK_DEP_DEPENDENCIA_ID; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.dependentes
    ADD CONSTRAINT "FK_DEP_DEPENDENCIA_ID" FOREIGN KEY (dep_dependencia_id) REFERENCES public.materias(mat_id) ON UPDATE CASCADE ON DELETE RESTRICT NOT VALID;


--
-- TOC entry 2913 (class 2606 OID 33225)
-- Name: dependentes FK_DEP_MATERIA_ID; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.dependentes
    ADD CONSTRAINT "FK_DEP_MATERIA_ID" FOREIGN KEY (dep_materia_id) REFERENCES public.materias(mat_id) ON UPDATE CASCADE ON DELETE CASCADE NOT VALID;


--
-- TOC entry 2917 (class 2606 OID 33187)
-- Name: grade_curso FK_GRA_CUR_ID; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.grade_curso
    ADD CONSTRAINT "FK_GRA_CUR_ID" FOREIGN KEY (gra_cur_id) REFERENCES public.cursos(cur_id);


--
-- TOC entry 2916 (class 2606 OID 33182)
-- Name: grade_curso FK_GRA_MAT_ID; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.grade_curso
    ADD CONSTRAINT "FK_GRA_MAT_ID" FOREIGN KEY (gra_mat_id) REFERENCES public.materias(mat_id);


--
-- TOC entry 2915 (class 2606 OID 33177)
-- Name: grade_curso FK_GRA_PRO_ID; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.grade_curso
    ADD CONSTRAINT "FK_GRA_PRO_ID" FOREIGN KEY (gra_pro_id) REFERENCES public.professores(pro_pes_id);


--
-- TOC entry 2918 (class 2606 OID 33205)
-- Name: historico_aluno FK_HIS_ALU_ID; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.historico_aluno
    ADD CONSTRAINT "FK_HIS_ALU_ID" FOREIGN KEY (his_alu_id) REFERENCES public.alunos(alu_pes_id);


--
-- TOC entry 2919 (class 2606 OID 33210)
-- Name: historico_aluno FK_HIS_GRA_ID; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.historico_aluno
    ADD CONSTRAINT "FK_HIS_GRA_ID" FOREIGN KEY (his_gra_id) REFERENCES public.grade_curso(gra_id);


--
-- TOC entry 2910 (class 2606 OID 25068)
-- Name: professores FK_PRO_PES; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.professores
    ADD CONSTRAINT "FK_PRO_PES" FOREIGN KEY (pro_pes_id) REFERENCES public.pessoas(pes_id) NOT VALID;
	
ALTER TABLE ONLY public.pessoas
    ADD CONSTRAINT "FK_PES_END" FOREIGN KEY (pes_end_id) REFERENCES public.enderecos(end_id) NOT VALID;


-- Completed on 2021-05-10 20:20:12

--
-- PostgreSQL database dump complete
--
